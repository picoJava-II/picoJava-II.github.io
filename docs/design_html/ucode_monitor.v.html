<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN">
<html><head>
<title>/import/jet-pj2-sim/rahim/picoJava-II/sim/env/ucode_monitor.v</title>
<LINK REL="Stylesheet" TITLE="v2html stylesheet" MEDIA="Screen" HREF="v2html.css">
</head>
<script language="JavaScript"><!--
if (!((navigator.appName == "Netscape") && 
      (navigator.appVersion.substring(0,1) >= 4))) {
  var event=false; // prevent from dieing in other browsers
}
var last_link=-1; // a cache of the last link found to speed up searching in the common case

function qs(e,t) {
  var inc=0,i;

  if ((navigator.appName == "Netscape") && 
      (navigator.appVersion.substring(0,1) >= 4)) {

    if (((e.which==2) && (!(e.modifiers&Event.SHIFT_MASK))) ||
	((e.which==1) &&  (e.modifiers&Event.CONTROL_MASK)))   inc = 1;
    else if (((e.which==2) && (e.modifiers&Event.SHIFT_MASK)) ||
	     ((e.which==1) && (e.modifiers&Event.SHIFT_MASK))) inc = -1;
    else return true;

    window.status="Searching...";
    if ((last_link!=-1) && (document.links[last_link]==t)) // try previous link first
      i=last_link;
    else // search for the link that was clicked
      for (i=0;i<document.links.length;i++) 
	if (document.links[i] == t)  
	  break;
    // once the link has been found search for the text starting at this link
    return search(t.text,t.y,i,inc);
  }
  return true;
}

function search(text,y,i,inc) {
  var nextpage,wrappage;
  while (1) {
    for (i+=inc;i<document.links.length && i>=0;i+=inc) {
      if ((document.links[i].text == text) && 
	  (document.links[i].y    != y)) {
	window.status="";
	window.scrollBy(0,document.links[i].y - y);
	last_link=i;
	return false;
      }
    }
    nextpage = (inc==1) ? next_page() : prev_page();
    wrappage = (inc==1) ? first_page() : last_page();
    if (nextpage!="" || wrappage!="") {
      if (nextpage=="") { // only ask when wrapping around
	if (!confirm(text + " not found. Search again from "+((inc==1)?"first":"last")+" page?"))
	  return false;
	nextpage=wrappage;
      }
      location=nextpage+ "?" + escape(text) + "&" + ( y - window.pageYOffset ) + "&" + inc;
      return false;
    }
    if (confirm(text + " not found. Search again from "+((inc==1)?"start":"end")+"?")) {
      if (inc==1) i=-1;
      else i=document.links.length;
    } else return false;
  }
  return true;
}

function loadqs() {
  var opt=location.search, text="", s="", y=0, si=0, inc=1;

  if (opt.length==0) return true;  // no query string
  window.status="Searching...";
  for (var i=1;i<opt.length;i++) { // parse query string: search_text&y_pos&direction
    if (opt.charAt(i) != "&") 
      s += opt.charAt(i);
    else {
      if (text=="") text=unescape(s);
      else             y=s;
      s="";
    }
  }
  if (text=="") return true;
  if (s == "-1") { si=document.links.length; inc=-1; }
  window.scrollTo(0,0);
  search(text,y,si,inc);
  return true;
}
// -->
</script>
<body onload='loadqs();'>
<script language="JavaScript"><!--
function prev_page() { return ""; }
function last_page() { return "ucode_monitor.v.html"; }
// -->
</script>
<center><table class=NB cols=7 nosave><tr><td align="center"><a  href="hierarchy.html">Hierarchy</a></td><td align="center"><a  href="hierarchy-f.html">Files</a></td><td align="center"><a  href="hierarchy-m.html">Modules</a></td><td align="center"><a  href="hierarchy-s.html">Signals</a></td><td align="center"><a  href="hierarchy-t.html">Tasks</a></td><td align="center"><a  href="hierarchy-fn.html">Functions</a></td><td align="center"><a  href="http://www.abrizio.com/v2html/help_5_0.html?">Help</a></td></tr></table></center>
<pre>
<span class=C>/****************************************************************
 ---------------------------------------------------------------
     Copyright 1999 Sun Microsystems, Inc., 901 San Antonio
     Road, Palo Alto, CA 94303, U.S.A.  All Rights Reserved.
     The contents of this file are subject to the current
     version of the Sun Community Source License, picoJava-II
     Core (&quot;the License&quot;).  You may not use this file except
     in compliance with the License.  You may obtain a copy
     of the License by searching for &quot;Sun Community Source
     License&quot; on the World Wide Web at <A CLASS=C href="http://www.sun.com">http://www.sun.com</A>.
     See the License for the rights, obligations, and
     limitations governing use of the contents of this file.

     Sun, Sun Microsystems, the Sun logo, and all Sun-based
     trademarks and logos, Java, picoJava, and all Java-based
     trademarks and logos are trademarks or registered trademarks 
     of Sun Microsystems, Inc. in the United States and other
     countries.
 ----------------------------------------------------------------
******************************************************************/</span>

<span class=C>// Microcode monitor
</span>

<span class=M>`include</span> <a  onClick="return qs(event,this)" class=S href="ucode.h.html">&quot;../../design/iu/ucode/rtl/ucode.h&quot;</a>

<a name="ucode_monitor"></a><a  href="monitor.v.html#monitor_ucode_monitor"><IMG alt="[Up: monitor ucode_monitor]" align=bottom border=0 SRC="v2html-up.gif"></a>
<span class=K>module</span> <span class=MM>ucode_monitor</span><a  href="hierarchy-m.p4.html#ucode_monitor"><IMG align=top border=0 SRC="v2html-i.gif"></a>(
	<a  onClick="return qs(event,this)" class=SI href="#93">clk</a>,
	<a  onClick="return qs(event,this)" class=SI href="#94">reset_l</a>,
	<a  onClick="return qs(event,this)" class=SI href="#95">u_addr_st_wt</a>,
	<a  onClick="return qs(event,this)" class=SI href="#96">u_addr_st_rd</a>,
	<a  onClick="return qs(event,this)" class=SI href="#97">dreg_data</a>,
	<a  onClick="return qs(event,this)" class=SI href="#98">ucode_addr_d</a>,
	<a  onClick="return qs(event,this)" class=SI href="#99">u_f01_wt_stk</a>,
	<a  onClick="return qs(event,this)" class=SI href="#100">u_f02_rd_stk</a>,
	<a  onClick="return qs(event,this)" class=SI href="#101">u_f00</a>,
	<a  onClick="return qs(event,this)" class=SI href="#102">u_f01</a>,
	<a  onClick="return qs(event,this)" class=SI href="#103">u_f02</a>,
	<a  onClick="return qs(event,this)" class=SI href="#104">u_f03</a>,
	<a  onClick="return qs(event,this)" class=SI href="#105">u_f04</a>,
	<a  onClick="return qs(event,this)" class=SI href="#106">u_f05</a>,
	<a  onClick="return qs(event,this)" class=SI href="#107">u_f06</a>,
	<a  onClick="return qs(event,this)" class=SI href="#108">u_f07</a>,
	<a  onClick="return qs(event,this)" class=SI href="#109">u_f08</a>,
	<a  onClick="return qs(event,this)" class=SI href="#110">u_f09</a>,
	<a  onClick="return qs(event,this)" class=SI href="#111">u_f10</a>,
	<a  onClick="return qs(event,this)" class=SI href="#112">u_f11</a>,
	<a  onClick="return qs(event,this)" class=SI href="#113">u_f12</a>,
	<a  onClick="return qs(event,this)" class=SI href="#114">u_f13</a>,
	<a  onClick="return qs(event,this)" class=SI href="#115">u_f14</a>,
	<a  onClick="return qs(event,this)" class=SI href="#116">u_f15</a>,
	<a  onClick="return qs(event,this)" class=SI href="#117">u_f16</a>,
	<a  onClick="return qs(event,this)" class=SI href="#118">u_f17</a>,
	<a  onClick="return qs(event,this)" class=SI href="#119">u_f18</a>,
	<a  onClick="return qs(event,this)" class=SI href="#120">u_f19</a>,
	<a  onClick="return qs(event,this)" class=SI href="#121">u_f20</a>,
	<a  onClick="return qs(event,this)" class=SI href="#122">u_f21</a>,
	<a  onClick="return qs(event,this)" class=SI href="#123">u_f22</a>,
	<a  onClick="return qs(event,this)" class=SI href="#124">u_done</a>,
	<a  onClick="return qs(event,this)" class=SI href="#125">u_last</a>,
	<a  onClick="return qs(event,this)" class=SI href="#126">ucode_porta</a>,
	<a  onClick="return qs(event,this)" class=SI href="#127">ucode_portc</a>,
	<a  onClick="return qs(event,this)" class=SI href="#128">u_ref_null_c</a>,
	<a  onClick="return qs(event,this)" class=SI href="#129">u_ary_ovf_c</a>,
	<a  onClick="return qs(event,this)" class=SI href="#130">gc_trap_c</a>,
	<a  onClick="return qs(event,this)" class=SI href="#131">u_ptr_un_eq_c</a>,
	<a  onClick="return qs(event,this)" class=SI href="#132">u_abt_rdwt</a>,
	<a  onClick="return qs(event,this)" class=SI href="#133">ie_stall_ucode</a>,
	<a  onClick="return qs(event,this)" class=SI href="#134">u_exception</a>,
	<a  onClick="return qs(event,this)" class=SI href="#135">nxt_ucode_last</a>,
	<a  onClick="return qs(event,this)" class=SI href="#136">reg_enable</a>,
	<a  onClick="return qs(event,this)" class=SI href="#137">optop</a>,
	<a  onClick="return qs(event,this)" class=SI href="#138">vars</a>,
	<a  onClick="return qs(event,this)" class=SI href="#139">ucode_cnt</a>,
	<a  onClick="return qs(event,this)" class=SI href="#140">iu_trap_r</a>,
	<a  onClick="return qs(event,this)" class=SI href="#141">ifu_op_valid_r</a>,
	<a  onClick="return qs(event,this)" class=SI href="#142">frame</a>,
	<a  onClick="return qs(event,this)" class=SI href="#143">cp</a>,
	<a  onClick="return qs(event,this)" class=SI href="#144">invokestatic_quick</a>,
	<a  onClick="return qs(event,this)" class=SI href="#145">invokenonvirtual_quick</a>,
	<a  onClick="return qs(event,this)" class=SI href="#146">invokevirtual_quick</a>,
	<a  onClick="return qs(event,this)" class=SI href="#147">invokevirtualobject_quick</a>,
	<a  onClick="return qs(event,this)" class=SI href="#148">invokevirtual_quick_w</a>,
	<a  onClick="return qs(event,this)" class=SI href="#149">invokesuper_quick</a>,
	<a  onClick="return qs(event,this)" class=SI href="#150">soft_trap</a>,
	<a  onClick="return qs(event,this)" class=SI href="#151">se</a>,
	<a  onClick="return qs(event,this)" class=SI href="#152">hold_e</a>,
	<a  onClick="return qs(event,this)" class=SI href="#153">opcode_1_op_r</a>,
	<a  onClick="return qs(event,this)" class=SI href="#154">valid_op_r</a>,
	<a  onClick="return qs(event,this)" class=SI href="#155">iu_hold_e</a>
);

<a name="93"></a><span class=K>input</span>		<a  onClick="return qs(event,this)" class=SI href="monitor.v.html#210">clk</a><a  href="hierarchy-s.p3.html#clk___ucode_monitor"><IMG align=top border=0 SRC="v2html-i.gif"></a>;
<a name="94"></a><span class=K>input</span>		<a  onClick="return qs(event,this)" class=SI href="monitor.v.html#211">reset_l</a><a  href="hierarchy-s.p15.html#reset_l___ucode_monitor"><IMG align=top border=0 SRC="v2html-i.gif"></a>;
<a name="95"></a><span class=K>input</span>	[31:0]	<a  onClick="return qs(event,this)" class=SI href="monitor.v.html#212">u_addr_st_wt</a><a  href="hierarchy-s.p18.html#u_addr_st_wt___ucode_monitor"><IMG align=top border=0 SRC="v2html-i.gif"></a>;
<a name="96"></a><span class=K>input</span>	[31:0]	<a  onClick="return qs(event,this)" class=SI href="monitor.v.html#213">u_addr_st_rd</a><a  href="hierarchy-s.p18.html#u_addr_st_rd___ucode_monitor"><IMG align=top border=0 SRC="v2html-i.gif"></a>;
<a name="97"></a><span class=K>input</span>	[31:0]	<a  onClick="return qs(event,this)" class=SI href="monitor.v.html#214">dreg_data</a><a  href="hierarchy-s.p4.html#dreg_data___ucode_monitor"><IMG align=top border=0 SRC="v2html-i.gif"></a>;
<a name="98"></a><span class=K>input</span>	[31:0]	<a  onClick="return qs(event,this)" class=SI href="monitor.v.html#215">ucode_addr_d</a><a  href="hierarchy-s.p18.html#ucode_addr_d___ucode_monitor"><IMG align=top border=0 SRC="v2html-i.gif"></a>;
<a name="99"></a><span class=K>input</span>		<a  onClick="return qs(event,this)" class=SI href="monitor.v.html#216">u_f01_wt_stk</a><a  href="hierarchy-s.p18.html#u_f01_wt_stk___ucode_monitor"><IMG align=top border=0 SRC="v2html-i.gif"></a>;
<a name="100"></a><span class=K>input</span>		<a  onClick="return qs(event,this)" class=SI href="monitor.v.html#217">u_f02_rd_stk</a><a  href="hierarchy-s.p18.html#u_f02_rd_stk___ucode_monitor"><IMG align=top border=0 SRC="v2html-i.gif"></a>;
<a name="101"></a><span class=K>input</span>	[1:0]	<a  onClick="return qs(event,this)" class=SI href="monitor.v.html#218">u_f00</a><a  href="hierarchy-s.p18.html#u_f00___ucode_monitor"><IMG align=top border=0 SRC="v2html-i.gif"></a>;
<a name="102"></a><span class=K>input</span>	[2:0]	<a  onClick="return qs(event,this)" class=SI href="monitor.v.html#219">u_f01</a><a  href="hierarchy-s.p18.html#u_f01___ucode_monitor"><IMG align=top border=0 SRC="v2html-i.gif"></a>;
<a name="103"></a><span class=K>input</span>	[1:0]	<a  onClick="return qs(event,this)" class=SI href="monitor.v.html#220">u_f02</a><a  href="hierarchy-s.p18.html#u_f02___ucode_monitor"><IMG align=top border=0 SRC="v2html-i.gif"></a>;
<a name="104"></a><span class=K>input</span>	[1:0]	<a  onClick="return qs(event,this)" class=SI href="monitor.v.html#221">u_f03</a><a  href="hierarchy-s.p18.html#u_f03___ucode_monitor"><IMG align=top border=0 SRC="v2html-i.gif"></a>;
<a name="105"></a><span class=K>input</span>	[6:0]	<a  onClick="return qs(event,this)" class=SI href="monitor.v.html#222">u_f04</a><a  href="hierarchy-s.p18.html#u_f04___ucode_monitor"><IMG align=top border=0 SRC="v2html-i.gif"></a>;
<a name="106"></a><span class=K>input</span>	[2:0]	<a  onClick="return qs(event,this)" class=SI href="monitor.v.html#223">u_f05</a><a  href="hierarchy-s.p18.html#u_f05___ucode_monitor"><IMG align=top border=0 SRC="v2html-i.gif"></a>;
<a name="107"></a><span class=K>input</span>	[3:0]	<a  onClick="return qs(event,this)" class=SI href="monitor.v.html#224">u_f06</a><a  href="hierarchy-s.p18.html#u_f06___ucode_monitor"><IMG align=top border=0 SRC="v2html-i.gif"></a>;
<a name="108"></a><span class=K>input</span>	[1:0]	<a  onClick="return qs(event,this)" class=SI href="monitor.v.html#225">u_f07</a><a  href="hierarchy-s.p18.html#u_f07___ucode_monitor"><IMG align=top border=0 SRC="v2html-i.gif"></a>;
<a name="109"></a><span class=K>input</span>	[2:0]	<a  onClick="return qs(event,this)" class=SI href="monitor.v.html#226">u_f08</a><a  href="hierarchy-s.p18.html#u_f08___ucode_monitor"><IMG align=top border=0 SRC="v2html-i.gif"></a>;
<a name="110"></a><span class=K>input</span>	[2:0]	<a  onClick="return qs(event,this)" class=SI href="monitor.v.html#227">u_f09</a><a  href="hierarchy-s.p18.html#u_f09___ucode_monitor"><IMG align=top border=0 SRC="v2html-i.gif"></a>;
<a name="111"></a><span class=K>input</span>	[2:0]	<a  onClick="return qs(event,this)" class=SI href="monitor.v.html#228">u_f10</a><a  href="hierarchy-s.p18.html#u_f10___ucode_monitor"><IMG align=top border=0 SRC="v2html-i.gif"></a>;
<a name="112"></a><span class=K>input</span>	[2:0]	<a  onClick="return qs(event,this)" class=SI href="monitor.v.html#229">u_f11</a><a  href="hierarchy-s.p18.html#u_f11___ucode_monitor"><IMG align=top border=0 SRC="v2html-i.gif"></a>;
<a name="113"></a><span class=K>input</span>	[1:0]	<a  onClick="return qs(event,this)" class=SI href="monitor.v.html#230">u_f12</a><a  href="hierarchy-s.p18.html#u_f12___ucode_monitor"><IMG align=top border=0 SRC="v2html-i.gif"></a>;
<a name="114"></a><span class=K>input</span>	[1:0]	<a  onClick="return qs(event,this)" class=SI href="monitor.v.html#231">u_f13</a><a  href="hierarchy-s.p18.html#u_f13___ucode_monitor"><IMG align=top border=0 SRC="v2html-i.gif"></a>;
<a name="115"></a><span class=K>input</span>	[1:0]	<a  onClick="return qs(event,this)" class=SI href="monitor.v.html#232">u_f14</a><a  href="hierarchy-s.p18.html#u_f14___ucode_monitor"><IMG align=top border=0 SRC="v2html-i.gif"></a>;
<a name="116"></a><span class=K>input</span>		<a  onClick="return qs(event,this)" class=SI href="monitor.v.html#233">u_f15</a><a  href="hierarchy-s.p18.html#u_f15___ucode_monitor"><IMG align=top border=0 SRC="v2html-i.gif"></a>;
<a name="117"></a><span class=K>input</span>	[1:0]	<a  onClick="return qs(event,this)" class=SI href="monitor.v.html#234">u_f16</a><a  href="hierarchy-s.p18.html#u_f16___ucode_monitor"><IMG align=top border=0 SRC="v2html-i.gif"></a>;
<a name="118"></a><span class=K>input</span>	[1:0]	<a  onClick="return qs(event,this)" class=SI href="monitor.v.html#235">u_f17</a><a  href="hierarchy-s.p18.html#u_f17___ucode_monitor"><IMG align=top border=0 SRC="v2html-i.gif"></a>;
<a name="119"></a><span class=K>input</span>	[11:0]	<a  onClick="return qs(event,this)" class=SI href="monitor.v.html#236">u_f18</a><a  href="hierarchy-s.p18.html#u_f18___ucode_monitor"><IMG align=top border=0 SRC="v2html-i.gif"></a>;
<a name="120"></a><span class=K>input</span>	[3:0]	<a  onClick="return qs(event,this)" class=SI href="monitor.v.html#237">u_f19</a><a  href="hierarchy-s.p18.html#u_f19___ucode_monitor"><IMG align=top border=0 SRC="v2html-i.gif"></a>;
<a name="121"></a><span class=K>input</span>	[3:0]	<a  onClick="return qs(event,this)" class=SI href="monitor.v.html#238">u_f20</a><a  href="hierarchy-s.p18.html#u_f20___ucode_monitor"><IMG align=top border=0 SRC="v2html-i.gif"></a>;
<a name="122"></a><span class=K>input</span>	[1:0]	<a  onClick="return qs(event,this)" class=SI href="monitor.v.html#239">u_f21</a><a  href="hierarchy-s.p18.html#u_f21___ucode_monitor"><IMG align=top border=0 SRC="v2html-i.gif"></a>;
<a name="123"></a><span class=K>input</span>		<a  onClick="return qs(event,this)" class=SI href="monitor.v.html#240">u_f22</a><a  href="hierarchy-s.p18.html#u_f22___ucode_monitor"><IMG align=top border=0 SRC="v2html-i.gif"></a>;
<a name="124"></a><span class=K>input</span>		<a  onClick="return qs(event,this)" class=SI href="monitor.v.html#241">u_done</a><a  href="hierarchy-s.p18.html#u_done___ucode_monitor"><IMG align=top border=0 SRC="v2html-i.gif"></a>;
<a name="125"></a><span class=K>input</span>		<a  onClick="return qs(event,this)" class=SI href="monitor.v.html#242">u_last</a><a  href="hierarchy-s.p18.html#u_last___ucode_monitor"><IMG align=top border=0 SRC="v2html-i.gif"></a>;
<a name="126"></a><span class=K>input</span>	[31:0]	<a  onClick="return qs(event,this)" class=SI href="monitor.v.html#243">ucode_porta</a><a  href="hierarchy-s.p18.html#ucode_porta___ucode_monitor"><IMG align=top border=0 SRC="v2html-i.gif"></a>;
<a name="127"></a><span class=K>input</span>	[31:0]	<a  onClick="return qs(event,this)" class=SI href="monitor.v.html#244">ucode_portc</a><a  href="hierarchy-s.p18.html#ucode_portc___ucode_monitor"><IMG align=top border=0 SRC="v2html-i.gif"></a>;
<a name="128"></a><span class=K>input</span>		<a  onClick="return qs(event,this)" class=SI href="monitor.v.html#245">u_ref_null_c</a><a  href="hierarchy-s.p18.html#u_ref_null_c___ucode_monitor"><IMG align=top border=0 SRC="v2html-i.gif"></a>;
<a name="129"></a><span class=K>input</span>		<a  onClick="return qs(event,this)" class=SI href="monitor.v.html#246">u_ary_ovf_c</a><a  href="hierarchy-s.p18.html#u_ary_ovf_c___ucode_monitor"><IMG align=top border=0 SRC="v2html-i.gif"></a>;
<a name="130"></a><span class=K>input</span>		<a  onClick="return qs(event,this)" class=SI href="monitor.v.html#247">gc_trap_c</a><a  href="hierarchy-s.p7.html#gc_trap_c___ucode_monitor"><IMG align=top border=0 SRC="v2html-i.gif"></a>;
<a name="131"></a><span class=K>input</span>		<a  onClick="return qs(event,this)" class=SI href="monitor.v.html#248">u_ptr_un_eq_c</a><a  href="hierarchy-s.p18.html#u_ptr_un_eq_c___ucode_monitor"><IMG align=top border=0 SRC="v2html-i.gif"></a>;
<a name="132"></a><span class=K>input</span>		<a  onClick="return qs(event,this)" class=SI href="monitor.v.html#249">u_abt_rdwt</a><a  href="hierarchy-s.p18.html#u_abt_rdwt___ucode_monitor"><IMG align=top border=0 SRC="v2html-i.gif"></a>;
<a name="133"></a><span class=K>input</span>		<a  onClick="return qs(event,this)" class=SI href="monitor.v.html#250">ie_stall_ucode</a><a  href="hierarchy-s.p9.html#ie_stall_ucode___ucode_monitor"><IMG align=top border=0 SRC="v2html-i.gif"></a>;
<a name="134"></a><span class=K>input</span>		<a  onClick="return qs(event,this)" class=SI href="monitor.v.html#251">u_exception</a><a  href="hierarchy-s.p18.html#u_exception___ucode_monitor"><IMG align=top border=0 SRC="v2html-i.gif"></a>;
<a name="135"></a><span class=K>input</span>		<a  onClick="return qs(event,this)" class=SI href="monitor.v.html#252">nxt_ucode_last</a><a  href="hierarchy-s.p12.html#nxt_ucode_last___ucode_monitor"><IMG align=top border=0 SRC="v2html-i.gif"></a>;
<a name="136"></a><span class=K>input</span>		<a  onClick="return qs(event,this)" class=SI href="monitor.v.html#253">reg_enable</a><a  href="hierarchy-s.p15.html#reg_enable___ucode_monitor"><IMG align=top border=0 SRC="v2html-i.gif"></a>;
<a name="137"></a><span class=K>input</span>	[31:0]	<a  onClick="return qs(event,this)" class=SI href="monitor.v.html#254">optop</a><a  href="hierarchy-s.p13.html#optop___ucode_monitor"><IMG align=top border=0 SRC="v2html-i.gif"></a>;
<a name="138"></a><span class=K>input</span>	[31:0]	<a  onClick="return qs(event,this)" class=SI href="monitor.v.html#255">vars</a><a  href="hierarchy-s.p19.html#vars___ucode_monitor"><IMG align=top border=0 SRC="v2html-i.gif"></a>;
<a name="139"></a><span class=K>input</span>	[8:0]	<a  onClick="return qs(event,this)" class=SI href="monitor.v.html#256">ucode_cnt</a><a  href="hierarchy-s.p18.html#ucode_cnt___ucode_monitor"><IMG align=top border=0 SRC="v2html-i.gif"></a>;
<a name="140"></a><span class=K>input</span>		<a  onClick="return qs(event,this)" class=SI href="monitor.v.html#257">iu_trap_r</a><a  href="hierarchy-s.p9.html#iu_trap_r___ucode_monitor"><IMG align=top border=0 SRC="v2html-i.gif"></a>;
<a name="141"></a><span class=K>input</span>		<a  onClick="return qs(event,this)" class=SI href="monitor.v.html#258">ifu_op_valid_r</a><a  href="hierarchy-s.p9.html#ifu_op_valid_r___ucode_monitor"><IMG align=top border=0 SRC="v2html-i.gif"></a>;
<a name="142"></a><span class=K>input</span>	[31:0]	<a  onClick="return qs(event,this)" class=SI href="monitor.v.html#259">frame</a><a  href="hierarchy-s.p6.html#frame___ucode_monitor"><IMG align=top border=0 SRC="v2html-i.gif"></a>;
<a name="143"></a><span class=K>input</span>	[31:0]	<a  onClick="return qs(event,this)" class=SI href="monitor.v.html#260">cp</a><a  href="hierarchy-s.p3.html#cp___ucode_monitor"><IMG align=top border=0 SRC="v2html-i.gif"></a>;
<a name="144"></a><span class=K>input</span>		<a  onClick="return qs(event,this)" class=SI href="monitor.v.html#261">invokestatic_quick</a><a  href="hierarchy-s.p9.html#invokestatic_quick___ucode_monitor"><IMG align=top border=0 SRC="v2html-i.gif"></a>;
<a name="145"></a><span class=K>input</span>		<a  onClick="return qs(event,this)" class=SI href="monitor.v.html#262">invokenonvirtual_quick</a><a  href="hierarchy-s.p9.html#invokenonvirtual_quick___ucode_monitor"><IMG align=top border=0 SRC="v2html-i.gif"></a>;
<a name="146"></a><span class=K>input</span>		<a  onClick="return qs(event,this)" class=SI href="monitor.v.html#263">invokevirtual_quick</a><a  href="hierarchy-s.p9.html#invokevirtual_quick___ucode_monitor"><IMG align=top border=0 SRC="v2html-i.gif"></a>;
<a name="147"></a><span class=K>input</span>		<a  onClick="return qs(event,this)" class=SI href="monitor.v.html#263">invokevirtualobject_quick</a><a  href="hierarchy-s.p9.html#invokevirtualobject_quick___ucode_monitor"><IMG align=top border=0 SRC="v2html-i.gif"></a>;
<a name="148"></a><span class=K>input</span>		<a  onClick="return qs(event,this)" class=SI href="monitor.v.html#265">invokevirtual_quick_w</a><a  href="hierarchy-s.p9.html#invokevirtual_quick_w___ucode_monitor"><IMG align=top border=0 SRC="v2html-i.gif"></a>;
<a name="149"></a><span class=K>input</span>		<a  onClick="return qs(event,this)" class=SI href="monitor.v.html#266">invokesuper_quick</a><a  href="hierarchy-s.p9.html#invokesuper_quick___ucode_monitor"><IMG align=top border=0 SRC="v2html-i.gif"></a>;
<a name="150"></a><span class=K>input</span>		<a  onClick="return qs(event,this)" class=SI href="monitor.v.html#267">soft_trap</a><a  href="hierarchy-s.p16.html#soft_trap___ucode_monitor"><IMG align=top border=0 SRC="v2html-i.gif"></a>;
<a name="151"></a><span class=K>input</span>		<a  onClick="return qs(event,this)" class=SI href="#151">se</a><a  href="hierarchy-s.p16.html#se___ucode_monitor"><IMG align=top border=0 SRC="v2html-i.gif"></a>;
<a name="152"></a><span class=K>input</span>		<a  onClick="return qs(event,this)" class=SI href="monitor.v.html#269">hold_e</a><a  href="hierarchy-s.p8.html#hold_e___ucode_monitor"><IMG align=top border=0 SRC="v2html-i.gif"></a>;
<a name="153"></a><span class=K>input</span>	[7:0]	<a  onClick="return qs(event,this)" class=SI href="monitor.v.html#270">opcode_1_op_r</a><a  href="hierarchy-s.p13.html#opcode_1_op_r___ucode_monitor"><IMG align=top border=0 SRC="v2html-i.gif"></a>;
<a name="154"></a><span class=K>input</span>		<a  onClick="return qs(event,this)" class=SI href="monitor.v.html#258">valid_op_r</a><a  href="hierarchy-s.p19.html#valid_op_r___ucode_monitor"><IMG align=top border=0 SRC="v2html-i.gif"></a>;
<a name="155"></a><span class=K>input</span>		<a  onClick="return qs(event,this)" class=SI href="monitor.v.html#272">iu_hold_e</a><a  href="hierarchy-s.p9.html#iu_hold_e___ucode_monitor"><IMG align=top border=0 SRC="v2html-i.gif"></a>;

<a name="157"></a><span class=K>integer</span>		<a  onClick="return qs(event,this)" class=SIT href="#161">monitor_enable</a><a  href="hierarchy-s.p11.html#monitor_enable___ucode_monitor"><IMG align=top border=0 SRC="v2html-i.gif"></a>;

<span class=K>initial</span>
  <span class=K>if</span> (<span class=ST>$test$plusargs</span>(<span class=S>&quot;no_ucode_mon&quot;</span>)) <span class=K>begin</span>
<a name="161"></a>    <a  onClick="return qs(event,this)" class=SIT href="#157">monitor_enable</a> = 0;
    <span class=ST>$display</span>(<span class=S>&quot;*** microcode monitor is disabled&quot;</span>);
  <span class=K>end</span>
  <span class=K>else</span> <span class=K>begin</span>
    <a  onClick="return qs(event,this)" class=SIT href="#157">monitor_enable</a> = 1;
    <span class=ST>$display</span>(<span class=S>&quot;*** microcode monitor is enabled&quot;</span>);
  <span class=K>end</span>

<a name="169"></a><span class=K>wire</span>		<a  onClick="return qs(event,this)" class=SW href="#170">ie_kill_ucode</a><a  href="hierarchy-s.p9.html#ie_kill_ucode___ucode_monitor"><IMG align=top border=0 SRC="v2html-i.gif"></a>;
<a name="170"></a><span class=K>assign</span>	<a  onClick="return qs(event,this)" class=SW href="#169">ie_kill_ucode</a> = <span class=D>`PICOJAVAII</span>.<span class=D>`DESIGN</span>.iu.ucode.ie_kill_ucode;

<a name="172"></a><span class=K>wire</span>		<a  onClick="return qs(event,this)" class=SW href="#174">ucode_special_request</a><a  href="hierarchy-s.p18.html#ucode_special_request___ucode_monitor"><IMG align=top border=0 SRC="v2html-i.gif"></a>;

<a name="174"></a><span class=K>assign</span> <a  onClick="return qs(event,this)" class=SW href="#172">ucode_special_request</a> = ((<a  onClick="return qs(event,this)" class=SI href="#102">u_f01</a> === <span class=D>`</span><a  onClick="return qs(event,this)" class=D href="ucode.h.html#42">F01_WT_DREG_STK</a>) ||
				(<a  onClick="return qs(event,this)" class=SI href="#102">u_f01</a> === <span class=D>`</span><a  onClick="return qs(event,this)" class=D href="ucode.h.html#43">F01_WT_DREG_STK_M8</a>));

<a name="177"></a><span class=K>reg</span>	[31:0]	<a  onClick="return qs(event,this)" class=SR href="#177">data</a><a  href="hierarchy-s.p4.html#data___ucode_monitor"><IMG align=top border=0 SRC="v2html-i.gif"></a>;
<a name="178"></a><span class=K>reg</span>	[31:0]	<a  onClick="return qs(event,this)" class=SR href="#178">addr</a><a  href="hierarchy-s.html#addr___ucode_monitor"><IMG align=top border=0 SRC="v2html-i.gif"></a>;

<span class=C>// rule 1 : reading and writing at the same stack-cache address is
</span><span class=C>//          not allowed
</span>
<span class=K>always</span> @(<span class=K>posedge</span> <a  onClick="return qs(event,this)" class=SI href="#93">clk</a>) <span class=K>begin</span>
  #2;
  <span class=K>if</span> (<a  onClick="return qs(event,this)" class=SI href="#94">reset_l</a> &amp; <a  onClick="return qs(event,this)" class=SIT href="#157">monitor_enable</a>)
    <span class=K>if</span> ((<a  onClick="return qs(event,this)" class=SI href="#99">u_f01_wt_stk</a> &amp; <a  onClick="return qs(event,this)" class=SI href="#100">u_f02_rd_stk</a>) &amp;&amp; (<a  onClick="return qs(event,this)" class=SI href="#95">u_addr_st_wt</a> === <a  onClick="return qs(event,this)" class=SI href="#96">u_addr_st_rd</a>))
      <span class=ST>$display</span>(<span class=S>&quot;ERROR: Ucode monitor: simultaneous read and write to same address of stack cache&quot;</span>);
<span class=K>end</span>

<span class=C>// rule 2 : If the ucode special request is made, the d$ data will be
</span><span class=C>//          requested to be written to the s$.  The data from d$ must
</span><span class=C>//          match what gets written to the s$ 3 cycles later.
</span>
<a name="ucode_monitor_reset_l_minus_1"></a><a name="194"></a><a  onClick="return qs(event,this)" class=MM href="mj_ffs_behv.v.p3.html#ff_sre">ff_sre</a>	reset_l_minus_1	(<a  onClick="return qs(event,this)" class=SO href="mj_ffs_behv.v.p3.html#2151">.out</a>(<a  onClick="return qs(event,this)" class=SW href="#194">reset_l_1</a><a  href="hierarchy-s.p15.html#reset_l_1___ucode_monitor"><IMG align=top border=0 SRC="v2html-i.gif"></a>),
			 <span class=SI>.din</span>(<a  onClick="return qs(event,this)" class=SI href="#94">reset_l</a>),
			 <span class=SI>.enable</span>(1'b1),
			 <span class=SI>.reset_l</span>(<a  onClick="return qs(event,this)" class=SI href="#94">reset_l</a>),
			 <span class=SI>.clk</span>(<a  onClick="return qs(event,this)" class=SI href="#93">clk</a>));

<a name="ucode_monitor_reset_l_minus_2"></a><a name="200"></a><a  onClick="return qs(event,this)" class=MM href="mj_ffs_behv.v.p3.html#ff_sre">ff_sre</a>	reset_l_minus_2	(<a  onClick="return qs(event,this)" class=SO href="mj_ffs_behv.v.p3.html#2151">.out</a>(<a  onClick="return qs(event,this)" class=SW href="#200">reset_l_2</a><a  href="hierarchy-s.p15.html#reset_l_2___ucode_monitor"><IMG align=top border=0 SRC="v2html-i.gif"></a>),
			 <span class=SI>.din</span>(<a  onClick="return qs(event,this)" class=SW href="#194">reset_l_1</a>),
			 <span class=SI>.enable</span>(1'b1),
			 <span class=SI>.reset_l</span>(<a  onClick="return qs(event,this)" class=SI href="#94">reset_l</a>),
			 <span class=SI>.clk</span>(<a  onClick="return qs(event,this)" class=SI href="#93">clk</a>));

<a name="ucode_monitor_reset_l_minus_3"></a><a name="206"></a><a  onClick="return qs(event,this)" class=MM href="mj_ffs_behv.v.p3.html#ff_sre">ff_sre</a>	reset_l_minus_3	(<a  onClick="return qs(event,this)" class=SO href="mj_ffs_behv.v.p3.html#2151">.out</a>(<a  onClick="return qs(event,this)" class=SW href="#206">reset_l_3</a><a  href="hierarchy-s.p15.html#reset_l_3___ucode_monitor"><IMG align=top border=0 SRC="v2html-i.gif"></a>),
			 <span class=SI>.din</span>(<a  onClick="return qs(event,this)" class=SW href="#200">reset_l_2</a>),
			 <span class=SI>.enable</span>(1'b1),
			 <span class=SI>.reset_l</span>(<a  onClick="return qs(event,this)" class=SI href="#94">reset_l</a>),
			 <span class=SI>.clk</span>(<a  onClick="return qs(event,this)" class=SI href="#93">clk</a>));

<a name="212"></a><span class=K>reg</span>	[31:0]	<a  onClick="return qs(event,this)" class=SR href="#212">rule_2_s_cache_addr</a><a  href="hierarchy-s.p15.html#rule_2_s_cache_addr___ucode_monitor"><IMG align=top border=0 SRC="v2html-i.gif"></a>;

<span class=C>//always @(posedge clk) begin
</span><span class=C>//  #2;
</span><span class=C>//  if (reset_l &amp; reset_l_3 &amp; monitor_enable &amp; u_done)
</span><span class=C>//    if (ucode_special_request) begin
</span><span class=C>//      data = dreg_data;
</span><span class=C>//      rule_2_s_cache_addr = u_addr_st_wt;
</span><span class=C>//      #`CLK_HALF_PERIOD;
</span><span class=C>//      #`CLK_HALF_PERIOD;
</span><span class=C>//      if (~ie_stall_ucode) begin
</span><span class=C>//	#`CLK_HALF_PERIOD;
</span><span class=C>//	#`CLK_HALF_PERIOD;
</span><span class=C>//	if (~ie_stall_ucode) begin
</span><span class=C>//	  #`CLK_HALF_PERIOD;
</span><span class=C>//	  #`CLK_HALF_PERIOD;
</span><span class=C>//	  if (u_done &amp; data !==
</span><span class=C>//	      `PICOJAVAII.`DESIGN.iu.rcu.rcu_dpath.scache.ram[rule_2_s_cache_addr%64])
</span><span class=C>//	    $display(&quot;Warning: Ucode monitor: %d: special request made but d$ data 3 cycles ago does not match s$ data now&quot;, `PICOJAVAII.clk_count);
</span><span class=C>//	end
</span><span class=C>//      end
</span><span class=C>//    end
</span><span class=C>//end 
</span>
<span class=C>// rule 3 : Conversely, if a ucode special request is not made, the d$ data
</span><span class=C>//	    should NOT be written into the same address of the stack cache
</span><span class=C>//	    two cycles later.
</span>
<span class=C>//reg	[31:0]	rule_3_s_cache_addr;
</span>
<span class=C>//always @(posedge clk) begin
</span><span class=C>//  #2;
</span><span class=C>//  if (reset_l &amp; reset_l_3 &amp; ~ucode_special_request &amp;
</span><span class=C>//      u_f01_wt_stk &amp; monitor_enable) begin
</span><span class=C>//    rule_3_s_cache_addr = u_addr_st_wt;
</span><span class=C>//    #`CLK_HALF_PERIOD;
</span><span class=C>//    #`CLK_HALF_PERIOD;
</span><span class=C>//    #`CLK_HALF_PERIOD;
</span><span class=C>//    #`CLK_HALF_PERIOD;
</span><span class=C>//    #`CLK_HALF_PERIOD;
</span><span class=C>//    #`CLK_HALF_PERIOD;
</span><span class=C>//    if (rule_3_s_cache_addr === u_addr_st_wt)
</span><span class=C>//      $display(&quot;ERROR: Ucode monitor: %d: special request not made yet d$ addr 3 cycles ago matches s$ write addr now&quot;, `PICOJAVAII.clk_count);
</span><span class=C>//  end
</span><span class=C>//end
</span>

<span class=C>// rule 4 : when a special request is made, u_f03 must indicate a
</span><span class=C>//          data cache read (&quot;F03_RD_DCACHE&quot;)
</span>
<a name="262"></a><span class=K>wire</span>		<a  onClick="return qs(event,this)" class=SW href="#263">read_d_cache</a><a  href="hierarchy-s.p15.html#read_d_cache___ucode_monitor"><IMG align=top border=0 SRC="v2html-i.gif"></a>;
<a name="263"></a><span class=K>assign</span>	<a  onClick="return qs(event,this)" class=SW href="#262">read_d_cache</a> = (<a  onClick="return qs(event,this)" class=SI href="#104">u_f03</a> === <span class=D>`</span><a  onClick="return qs(event,this)" class=D href="ucode.h.html#51">F03_RD_DCACHE</a>) ||
		       (<a  onClick="return qs(event,this)" class=SI href="#104">u_f03</a> === <span class=D>`</span><a  onClick="return qs(event,this)" class=D href="ucode.h.html#53">F03_ARY_LD</a>);

<span class=K>always</span> @(<span class=K>posedge</span> <a  onClick="return qs(event,this)" class=SI href="#93">clk</a>) <span class=K>begin</span>
  #2;
  <span class=K>if</span> (<a  onClick="return qs(event,this)" class=SI href="#94">reset_l</a> &amp; <a  onClick="return qs(event,this)" class=SW href="#172">ucode_special_request</a> &amp; <a  onClick="return qs(event,this)" class=SIT href="#157">monitor_enable</a> &amp; ~<a  onClick="return qs(event,this)" class=SW href="#262">read_d_cache</a>)
    <span class=ST>$display</span>(<span class=S>&quot;ERROR: Ucode monitor: ucode is not reading d$ during special request&quot;</span>);
<span class=K>end</span>


<span class=C>// rule 5 : if a read or write request is made to s$ or d$, and one of
</span><span class=C>//          4 exception cases occurs, no state should be changed in the
</span><span class=C>//          w-stage.  We will detect the exception signals from iu, which
</span><span class=C>//          takes place in the c-stage (even though ucode asserts it late
</span><span class=C>//          in e-stage).  Further, u_done should be high when one of these
</span><span class=C>//          exceptions occurs.
</span>
<a name="280"></a><span class=K>wire</span>		<a  onClick="return qs(event,this)" class=SW href="#281">d_cache_access</a><a  href="hierarchy-s.p4.html#d_cache_access___ucode_monitor"><IMG align=top border=0 SRC="v2html-i.gif"></a>;
<a name="281"></a><span class=K>assign</span> <a  onClick="return qs(event,this)" class=SW href="#280">d_cache_access</a> = |<a  onClick="return qs(event,this)" class=SI href="#104">u_f03</a>;

<a name="283"></a><span class=K>wire</span>		<a  onClick="return qs(event,this)" class=SW href="#284">s_cache_access</a><a  href="hierarchy-s.p16.html#s_cache_access___ucode_monitor"><IMG align=top border=0 SRC="v2html-i.gif"></a>;
<a name="284"></a><span class=K>assign</span> <a  onClick="return qs(event,this)" class=SW href="#283">s_cache_access</a> = (|<a  onClick="return qs(event,this)" class=SI href="#102">u_f01</a>) | (|<a  onClick="return qs(event,this)" class=SI href="#103">u_f02</a>);


<a name="287"></a><span class=K>wire</span>		<a  onClick="return qs(event,this)" class=SW href="#288">one_of_four_exceptions</a><a  href="hierarchy-s.p13.html#one_of_four_exceptions___ucode_monitor"><IMG align=top border=0 SRC="v2html-i.gif"></a>;
<a name="288"></a><span class=K>assign</span> <a  onClick="return qs(event,this)" class=SW href="#287">one_of_four_exceptions</a> = <a  onClick="return qs(event,this)" class=SI href="#128">u_ref_null_c</a> | <a  onClick="return qs(event,this)" class=SI href="#129">u_ary_ovf_c</a> |
                                <a  onClick="return qs(event,this)" class=SI href="#130">gc_trap_c</a> | <a  onClick="return qs(event,this)" class=SI href="#131">u_ptr_un_eq_c</a>;

<span class=K>always</span> @(<span class=K>posedge</span> <a  onClick="return qs(event,this)" class=SI href="#93">clk</a>) <span class=K>begin</span>
  #2;
  <span class=K>if</span> (<a  onClick="return qs(event,this)" class=SI href="#94">reset_l</a> &amp; <a  onClick="return qs(event,this)" class=SIT href="#157">monitor_enable</a>)
    <span class=K>if</span> (<a  onClick="return qs(event,this)" class=SW href="#280">d_cache_access</a> || <a  onClick="return qs(event,this)" class=SW href="#283">s_cache_access</a>) <span class=K>begin</span>
      #<span class=D>`CLK_HALF_PERIOD</span>;
      #<span class=D>`CLK_HALF_PERIOD</span>;    <span class=C>// now in c-stage
</span>      <span class=K>if</span> (<a  onClick="return qs(event,this)" class=SW href="#287">one_of_four_exceptions</a>) <span class=K>begin</span>
	#<span class=D>`CLK_HALF_PERIOD</span>;
	#<span class=D>`CLK_HALF_PERIOD</span>;
	<span class=K>if</span> (<a  onClick="return qs(event,this)" class=SI href="#124">u_done</a> == 0)
	  <span class=ST>$display</span>(<span class=S>&quot;ERROR: Ucode monitor: cache access in e-stage; exception seen in c-stage; but u_done not asserted by w-stage&quot;</span>);
      <span class=K>end</span>
    <span class=K>end</span>
<span class=K>end</span>


<span class=C>// rule 6 : if a read or write is request is made to s$ or d$, and iu
</span><span class=C>//          aborts the request, d$/s$ state should not be changed.
</span>
<span class=C>// always @(posedge clk) begin
</span><span class=C>//   #2;
</span><span class=C>//   if (u_abt_rdwt &amp; reset_l &amp; monitor_enable)
</span><span class=C>//     if (d_cache_access || s_cache_access)
</span><span class=C>//       $display(&quot;ERROR: Ucode monitor: ucode aborted d$ or s$ read/write but request still outstanding&quot;);
</span><span class=C>// end
</span>

<span class=C>// rule 7 : if ucode is stalled, exceptions may not be thrown.
</span>
<span class=K>always</span> @(<span class=K>posedge</span> <a  onClick="return qs(event,this)" class=SI href="#93">clk</a>) <span class=K>begin</span>
  #2;
  <span class=K>if</span> (<a  onClick="return qs(event,this)" class=SI href="#133">ie_stall_ucode</a> &amp; <a  onClick="return qs(event,this)" class=SI href="#134">u_exception</a> &amp; <a  onClick="return qs(event,this)" class=SI href="#94">reset_l</a> &amp; <a  onClick="return qs(event,this)" class=SIT href="#157">monitor_enable</a>)
    <span class=ST>$display</span>(<span class=S>&quot;ERROR: Ucode monitor: ucode threw exception when stalled&quot;</span>);
<span class=K>end</span>


<span class=C>// rule 8 : u_done is asserted during the last ucode cycle
</span>
<span class=K>always</span> @(<span class=K>posedge</span> <a  onClick="return qs(event,this)" class=SI href="#93">clk</a>) <span class=K>begin</span>
  <span class=K>if</span> (<a  onClick="return qs(event,this)" class=SI href="#125">u_last</a> &amp; ~<a  onClick="return qs(event,this)" class=SI href="#124">u_done</a> &amp; <a  onClick="return qs(event,this)" class=SI href="#94">reset_l</a> &amp; <a  onClick="return qs(event,this)" class=SIT href="#157">monitor_enable</a>)
    <span class=ST>$display</span>(<span class=S>&quot;ERROR: Ucode monitor: u_last asserted without u_done&quot;</span>);
<span class=K>end</span>
  

<span class=C>// rule 9 : optop and vars cannot be updated by ucode in the last ucode cycle
</span>
<a name="337"></a><span class=K>wire</span>		<a  onClick="return qs(event,this)" class=SW href="#338">next_is_last_cycle</a><a  href="hierarchy-s.p12.html#next_is_last_cycle___ucode_monitor"><IMG align=top border=0 SRC="v2html-i.gif"></a>;
<a name="338"></a><span class=K>assign</span> <a  onClick="return qs(event,this)" class=SW href="#337">next_is_last_cycle</a> = <a  onClick="return qs(event,this)" class=SI href="#135">nxt_ucode_last</a> &amp; <a  onClick="return qs(event,this)" class=SI href="#136">reg_enable</a>;
<a name="339"></a><span class=K>wire</span>		<a  onClick="return qs(event,this)" class=SW href="#340">optop_change_requested</a><a  href="hierarchy-s.p13.html#optop_change_requested___ucode_monitor"><IMG align=top border=0 SRC="v2html-i.gif"></a>;
<a name="340"></a><span class=K>assign</span>	<a  onClick="return qs(event,this)" class=SW href="#339">optop_change_requested</a> = (<a  onClick="return qs(event,this)" class=SI href="#106">u_f05</a> === <span class=D>`</span><a  onClick="return qs(event,this)" class=D href="ucode.h.html#70">F05_WT_A_OPTOP</a>) ||
				(<a  onClick="return qs(event,this)" class=SI href="#106">u_f05</a> === <span class=D>`</span><a  onClick="return qs(event,this)" class=D href="ucode.h.html#71">F05_WT_V_OPTOP</a>);
<a name="342"></a><span class=K>wire</span>		<a  onClick="return qs(event,this)" class=SW href="#343">vars_change_requested</a><a  href="hierarchy-s.p19.html#vars_change_requested___ucode_monitor"><IMG align=top border=0 SRC="v2html-i.gif"></a>;
<a name="343"></a><span class=K>assign</span>	<a  onClick="return qs(event,this)" class=SW href="#342">vars_change_requested</a> = (<a  onClick="return qs(event,this)" class=SI href="#106">u_f05</a> === <span class=D>`</span><a  onClick="return qs(event,this)" class=D href="ucode.h.html#67">F05_WT_A_VARS</a>);

<a name="345"></a><span class=K>reg</span>	[31:0]	<a  onClick="return qs(event,this)" class=SR href="#351">rule_9_optop</a><a  href="hierarchy-s.p15.html#rule_9_optop___ucode_monitor"><IMG align=top border=0 SRC="v2html-i.gif"></a>;
<a name="346"></a><span class=K>reg</span>	[31:0]	<a  onClick="return qs(event,this)" class=SR href="#352">rule_9_vars</a><a  href="hierarchy-s.p15.html#rule_9_vars___ucode_monitor"><IMG align=top border=0 SRC="v2html-i.gif"></a>;

<span class=K>always</span> @(<span class=K>posedge</span> <a  onClick="return qs(event,this)" class=SI href="#93">clk</a>) <span class=K>begin</span>
  #2;
  <span class=K>if</span> (<a  onClick="return qs(event,this)" class=SW href="#337">next_is_last_cycle</a> &amp; ~<a  onClick="return qs(event,this)" class=SI href="#134">u_exception</a> &amp; <a  onClick="return qs(event,this)" class=SI href="#94">reset_l</a> &amp; <a  onClick="return qs(event,this)" class=SIT href="#157">monitor_enable</a>) <span class=K>begin</span>
<a name="351"></a>    <a  onClick="return qs(event,this)" class=SR href="#345">rule_9_optop</a> = <a  onClick="return qs(event,this)" class=SI href="#137">optop</a>;
<a name="352"></a>    <a  onClick="return qs(event,this)" class=SR href="#346">rule_9_vars</a> = <a  onClick="return qs(event,this)" class=SI href="#138">vars</a>;
    #<span class=D>`CLK_HALF_PERIOD</span>;
    #<span class=D>`CLK_HALF_PERIOD</span>;
    <span class=C>// if (rule_9_optop !== optop)
</span>    <span class=K>if</span> (<a  onClick="return qs(event,this)" class=SW href="#339">optop_change_requested</a>)
      <span class=ST>$display</span>(<span class=S>&quot;ERROR: Ucode monitor: optop updated in last ucode cycle&quot;</span>);
    <span class=C>// if (rule_9_vars !== vars)
</span>    <span class=K>if</span> (<a  onClick="return qs(event,this)" class=SW href="#342">vars_change_requested</a>)
      <span class=ST>$display</span>(<span class=S>&quot;ERROR: Ucode monitor: vars updated in last ucode cycle&quot;</span>);
  <span class=K>end</span>
<span class=K>end</span>


<span class=C>// rule 10 : if microcode is done, all fields should be in idle (default) state
</span>
<a name="367"></a><span class=K>wire</span>		<a  onClick="return qs(event,this)" class=SW href="#368">all_at_default</a><a  href="hierarchy-s.html#all_at_default___ucode_monitor"><IMG align=top border=0 SRC="v2html-i.gif"></a>;
<a name="368"></a><span class=K>assign</span> <a  onClick="return qs(event,this)" class=SW href="#367">all_at_default</a> = (
  (<a  onClick="return qs(event,this)" class=SI href="#101">u_f00</a> === <span class=D>`</span><a  onClick="return qs(event,this)" class=D href="ucode.h.html#30">F00_DEFAULT</a>)    &amp;&amp;
  (<a  onClick="return qs(event,this)" class=SI href="#102">u_f01</a> === <span class=D>`</span><a  onClick="return qs(event,this)" class=D href="ucode.h.html#36">F01_DEFAULT</a>)    &amp;&amp; (<a  onClick="return qs(event,this)" class=SI href="#103">u_f02</a> === <span class=D>`</span><a  onClick="return qs(event,this)" class=D href="ucode.h.html#45">F02_DEFAULT</a>)    &amp;&amp;
  (<a  onClick="return qs(event,this)" class=SI href="#104">u_f03</a> === <span class=D>`</span><a  onClick="return qs(event,this)" class=D href="ucode.h.html#50">F03_DEFAULT</a>)    &amp;&amp; (<a  onClick="return qs(event,this)" class=SI href="#105">u_f04</a> === <span class=D>`</span><a  onClick="return qs(event,this)" class=D href="ucode.h.html#56">F04_DEFAULT</a>)    &amp;&amp;
  (<a  onClick="return qs(event,this)" class=SI href="#106">u_f05</a> === <span class=D>`</span><a  onClick="return qs(event,this)" class=D href="ucode.h.html#65">F05_DEFAULT</a>)    &amp;&amp; (<a  onClick="return qs(event,this)" class=SI href="#107">u_f06</a> === <span class=D>`</span><a  onClick="return qs(event,this)" class=D href="ucode.h.html#75">F06_DEFAULT</a>)    &amp;&amp;
  (<a  onClick="return qs(event,this)" class=SI href="#108">u_f07</a> === <span class=D>`</span><a  onClick="return qs(event,this)" class=D href="ucode.h.html#92">F07_DEFAULT</a>)    &amp;&amp; (<a  onClick="return qs(event,this)" class=SI href="#109">u_f08</a> === <span class=D>`</span><a  onClick="return qs(event,this)" class=D href="ucode.h.html#102">F08_DEFAULT</a>)    &amp;&amp;
  (<a  onClick="return qs(event,this)" class=SI href="#110">u_f09</a> === <span class=D>`</span><a  onClick="return qs(event,this)" class=D href="ucode.h.html#113">F09_DEFAULT</a>)    &amp;&amp; (<a  onClick="return qs(event,this)" class=SI href="#111">u_f10</a> === <span class=D>`</span><a  onClick="return qs(event,this)" class=D href="ucode.h.html#124">F10_DEFAULT</a>)    &amp;&amp;
  (<a  onClick="return qs(event,this)" class=SI href="#112">u_f11</a> === <span class=D>`</span><a  onClick="return qs(event,this)" class=D href="ucode.h.html#131">F11_DEFAULT</a>)    &amp;&amp; (<a  onClick="return qs(event,this)" class=SI href="#113">u_f12</a> === <span class=D>`</span><a  onClick="return qs(event,this)" class=D href="ucode.h.html#138">F12_DEFAULT</a>)    &amp;&amp;
  (<a  onClick="return qs(event,this)" class=SI href="#114">u_f13</a> === <span class=D>`</span><a  onClick="return qs(event,this)" class=D href="ucode.h.html#144">F13_DEFAULT</a>)    &amp;&amp; (<a  onClick="return qs(event,this)" class=SI href="#115">u_f14</a> === <span class=D>`</span><a  onClick="return qs(event,this)" class=D href="ucode.h.html#149">F14_DEFAULT</a>)    &amp;&amp;
  (<a  onClick="return qs(event,this)" class=SI href="#116">u_f15</a> === <span class=D>`</span><a  onClick="return qs(event,this)" class=D href="ucode.h.html#153">F15_DEFAULT</a>)    &amp;&amp; (<a  onClick="return qs(event,this)" class=SI href="#117">u_f16</a> === <span class=D>`</span><a  onClick="return qs(event,this)" class=D href="ucode.h.html#157">F16_DEFAULT</a>)    &amp;&amp;
  (<a  onClick="return qs(event,this)" class=SI href="#118">u_f17</a> === <span class=D>`</span><a  onClick="return qs(event,this)" class=D href="ucode.h.html#164">F17_DEFAULT</a>)    &amp;&amp; (<a  onClick="return qs(event,this)" class=SI href="#119">u_f18</a> === <span class=D>`</span><a  onClick="return qs(event,this)" class=D href="ucode.h.html#170">F18_DEFAULT</a>)    &amp;&amp;
  (<a  onClick="return qs(event,this)" class=SI href="#120">u_f19</a> === <span class=D>`</span><a  onClick="return qs(event,this)" class=D href="ucode.h.html#188">F19_DEFAULT</a>)    &amp;&amp; (<a  onClick="return qs(event,this)" class=SI href="#121">u_f20</a> === <span class=D>`</span><a  onClick="return qs(event,this)" class=D href="ucode.h.html#201">F20_DEFAULT</a>)    &amp;&amp;
  (<a  onClick="return qs(event,this)" class=SI href="#122">u_f21</a> === <span class=D>`</span><a  onClick="return qs(event,this)" class=D href="ucode.h.html#219">F21_DEFAULT</a>)    &amp;&amp; (<a  onClick="return qs(event,this)" class=SI href="#123">u_f22</a> === <span class=D>`</span><a  onClick="return qs(event,this)" class=D href="ucode.h.html#224">F22_DEFAULT</a>)
);

<span class=C>// always @(negedge u_last) begin
</span><span class=C>//   #5;
</span><span class=C>//   if (~all_at_default &amp; reset_l &amp; monitor_enable &amp; u_done &amp; ~ie_stall_ucode
</span><span class=C>//                       &amp; ~ie_kill_ucode)
</span><span class=C>//       $display(&quot;ERROR: Ucode monitor: %d: u_f?? not at default when ucode completed&quot;, `PICOJAVAII.clk_count);
</span><span class=C>// end
</span>

<span class=C>// rule 11 : after synchronous interrupt (only at first cycle),
</span><span class=C>//           s$, d$, and regs should be unchanged.
</span>
<a name="394"></a><span class=K>wire</span>		<a  onClick="return qs(event,this)" class=SW href="#395">s_cache_write</a><a  href="hierarchy-s.p16.html#s_cache_write___ucode_monitor"><IMG align=top border=0 SRC="v2html-i.gif"></a>;
<a name="395"></a><span class=K>assign</span> <a  onClick="return qs(event,this)" class=SW href="#394">s_cache_write</a> = |<a  onClick="return qs(event,this)" class=SI href="#102">u_f01</a>;
<a name="396"></a><span class=K>wire</span>		<a  onClick="return qs(event,this)" class=SW href="#397">d_cache_write</a><a  href="hierarchy-s.p4.html#d_cache_write___ucode_monitor"><IMG align=top border=0 SRC="v2html-i.gif"></a>;
<a name="397"></a><span class=K>assign</span> <a  onClick="return qs(event,this)" class=SW href="#396">d_cache_write</a> = (<a  onClick="return qs(event,this)" class=SI href="#104">u_f03</a> === <span class=D>`</span><a  onClick="return qs(event,this)" class=D href="ucode.h.html#52">F03_WT_DCACHE</a>);
<a name="398"></a><span class=K>wire</span>		<a  onClick="return qs(event,this)" class=SW href="#399">reg_write</a><a  href="hierarchy-s.p15.html#reg_write___ucode_monitor"><IMG align=top border=0 SRC="v2html-i.gif"></a>;
<a name="399"></a><span class=K>assign</span> <a  onClick="return qs(event,this)" class=SW href="#398">reg_write</a> = |<a  onClick="return qs(event,this)" class=SI href="#106">u_f05</a>;

<a name="401"></a><span class=K>wire</span>		<a  onClick="return qs(event,this)" class=SW href="#402">any_write_request</a><a  href="hierarchy-s.html#any_write_request___ucode_monitor"><IMG align=top border=0 SRC="v2html-i.gif"></a>;
<a name="402"></a><span class=K>assign</span> <a  onClick="return qs(event,this)" class=SW href="#401">any_write_request</a> = <a  onClick="return qs(event,this)" class=SW href="#395">s_cache_write</a> | <a  onClick="return qs(event,this)" class=SW href="#397">d_cache_write</a> | <a  onClick="return qs(event,this)" class=SW href="#399">reg_write</a>;
<a name="403"></a><span class=K>wire</span>		<a  onClick="return qs(event,this)" class=SW href="#404">write_req_killed</a><a  href="hierarchy-s.p20.html#write_req_killed___ucode_monitor"><IMG align=top border=0 SRC="v2html-i.gif"></a>;
<a name="404"></a><span class=K>assign</span>	<a  onClick="return qs(event,this)" class=SW href="#403">write_req_killed</a> = <span class=D>`PICOJAVAII</span>.<span class=D>`DESIGN</span>.iu.rcu.iu_data_we_w |
			   <span class=D>`PICOJAVAII</span>.<span class=D>`DESIGN</span>.iu.iu_kill_dcu ;

<span class=C>// always @(negedge u_done) begin
</span><span class=C>//   #2;
</span><span class=C>//   if (`PICOJAVAII.`DESIGN.iu.ucode.ie_kill_ucode &amp; any_write_request &amp; ~write_req_killed &amp; reset_l &amp; monitor_enable)
</span><span class=C>//     $display(&quot;ERROR: Ucode monitor: ucode interrupt occurred during 1st cycle but s$/d$ write not killed&quot;);
</span><span class=C>// end
</span>

<span class=C>// rule 12 : for asynchronous exception, print a warning message saying
</span><span class=C>//           that the state will be unknown
</span>
<span class=C>// always @(negedge u_done) begin
</span><span class=C>//   #2;
</span><span class=C>//   #`CLK_HALF_PERIOD;
</span><span class=C>//   #`CLK_HALF_PERIOD;
</span><span class=C>// 
</span><span class=C>//   while (~u_done &amp; reset_l &amp; monitor_enable) begin
</span><span class=C>//     #5;
</span><span class=C>//     if (`PICOJAVAII.`DESIGN.iu.ucode.ie_kill_ucode)
</span><span class=C>//       $display(&quot;Warning: Ucode monitor: asynchronous exception taken&quot;);
</span><span class=C>//   end
</span><span class=C>// end
</span>

<span class=C>/******************** Commented out. iu_trap_r is also high for traps.
// rule 13 : iu_trap_r must be high if executing a soft_trap instruction

ff_sre	soft_trap_flop	(.out(soft_trap_e),
			 .din(soft_trap),
			 .enable(!ie_stall_ucode),
			 .reset_l(reset_l),
			 .clk(clk));

always @(posedge clk) begin
  #2;
  if ((soft_trap_e ^ iu_trap_r) &amp; reset_l &amp; monitor_enable &amp; ~u_done &amp; ~ie_stall_ucode)
    $display(&quot;ERROR: Ucode monitor: iu_trap_r doesn't match soft_trap_e&quot;);
end

********************************************************************************/</span>

<span class=C>// rule 14 : iu_trap_r and ifu_op_valid_r are never active at the same time
</span>
<span class=K>always</span> @(<span class=K>posedge</span> <a  onClick="return qs(event,this)" class=SI href="#93">clk</a>) <span class=K>begin</span>
  #2;
  <span class=K>if</span> (<a  onClick="return qs(event,this)" class=SI href="#140">iu_trap_r</a> &amp; <a  onClick="return qs(event,this)" class=SI href="#141">ifu_op_valid_r</a> &amp; <a  onClick="return qs(event,this)" class=SI href="#94">reset_l</a> &amp; <a  onClick="return qs(event,this)" class=SIT href="#157">monitor_enable</a>)
    <span class=ST>$display</span>(<span class=S>&quot;ERROR: Ucode monitor: iu_trap_r = ifu_op_valid_r = 1&quot;</span>);
<span class=K>end</span>


<span class=C>// rule 15 : if vars/frame/cp is changed, ucode may not make any further
</span><span class=C>//	     d$ read requests
</span>
<a name="459"></a><span class=K>reg</span>	[31:0]	<a  onClick="return qs(event,this)" class=SR href="#473">rule_15_vars</a><a  href="hierarchy-s.p15.html#rule_15_vars___ucode_monitor"><IMG align=top border=0 SRC="v2html-i.gif"></a>;
<a name="460"></a><span class=K>reg</span>	[31:0]	<a  onClick="return qs(event,this)" class=SR href="#474">rule_15_frame</a><a  href="hierarchy-s.p15.html#rule_15_frame___ucode_monitor"><IMG align=top border=0 SRC="v2html-i.gif"></a>;
<a name="461"></a><span class=K>reg</span>	[31:0]	<a  onClick="return qs(event,this)" class=SR href="#475">rule_15_cp</a><a  href="hierarchy-s.p15.html#rule_15_cp___ucode_monitor"><IMG align=top border=0 SRC="v2html-i.gif"></a>;
<a name="462"></a><span class=K>integer</span>		<a  onClick="return qs(event,this)" class=SIT href="#476">write_reg_request_made</a><a  href="hierarchy-s.p20.html#write_reg_request_made___ucode_monitor"><IMG align=top border=0 SRC="v2html-i.gif"></a>;
<a name="463"></a><span class=K>integer</span>		<a  onClick="return qs(event,this)" class=SIT href="#481">register_changed</a><a  href="hierarchy-s.p15.html#register_changed___ucode_monitor"><IMG align=top border=0 SRC="v2html-i.gif"></a>;

<a name="465"></a><span class=K>wire</span>		<a  onClick="return qs(event,this)" class=SW href="#466">d_cache_read</a><a  href="hierarchy-s.p4.html#d_cache_read___ucode_monitor"><IMG align=top border=0 SRC="v2html-i.gif"></a>;
<a name="466"></a><span class=K>assign</span> <a  onClick="return qs(event,this)" class=SW href="#465">d_cache_read</a> = ((<a  onClick="return qs(event,this)" class=SI href="#104">u_f03</a> === <span class=D>`</span><a  onClick="return qs(event,this)" class=D href="ucode.h.html#51">F03_RD_DCACHE</a>) || (<a  onClick="return qs(event,this)" class=SI href="#104">u_f03</a> === <span class=D>`</span><a  onClick="return qs(event,this)" class=D href="ucode.h.html#53">F03_ARY_LD</a>));

<span class=K>always</span> @(<span class=K>posedge</span> <a  onClick="return qs(event,this)" class=SI href="#93">clk</a>) <span class=K>begin</span>
  #2;
  <span class=K>if</span> (~<a  onClick="return qs(event,this)" class=SI href="#124">u_done</a> &amp; <a  onClick="return qs(event,this)" class=SI href="#94">reset_l</a> &amp; <a  onClick="return qs(event,this)" class=SIT href="#157">monitor_enable</a>) <span class=K>begin</span>
    <span class=K>if</span> ((<a  onClick="return qs(event,this)" class=SI href="#106">u_f05</a> === <span class=D>`</span><a  onClick="return qs(event,this)" class=D href="ucode.h.html#67">F05_WT_A_VARS</a>) || (<a  onClick="return qs(event,this)" class=SI href="#106">u_f05</a> === <span class=D>`</span><a  onClick="return qs(event,this)" class=D href="ucode.h.html#68">F05_WT_A_FRAME</a>) ||
	                (<a  onClick="return qs(event,this)" class=SI href="#106">u_f05</a> === <span class=D>`</span><a  onClick="return qs(event,this)" class=D href="ucode.h.html#69">F05_WT_A_CONST_P</a>)) <span class=K>begin</span>
<a name="473"></a>      <a  onClick="return qs(event,this)" class=SR href="#459">rule_15_vars</a> = <a  onClick="return qs(event,this)" class=SI href="#138">vars</a>;
<a name="474"></a>      <a  onClick="return qs(event,this)" class=SR href="#460">rule_15_frame</a> = <a  onClick="return qs(event,this)" class=SI href="#142">frame</a>;
<a name="475"></a>      <a  onClick="return qs(event,this)" class=SR href="#461">rule_15_cp</a> = <a  onClick="return qs(event,this)" class=SI href="#143">cp</a>;
<a name="476"></a>      <a  onClick="return qs(event,this)" class=SIT href="#462">write_reg_request_made</a> = 1;
    <span class=K>end</span>
    <span class=K>if</span> (<a  onClick="return qs(event,this)" class=SIT href="#462">write_reg_request_made</a>)
      <span class=K>if</span> ((<a  onClick="return qs(event,this)" class=SR href="#459">rule_15_vars</a> !== <a  onClick="return qs(event,this)" class=SI href="#138">vars</a>) || (<a  onClick="return qs(event,this)" class=SR href="#460">rule_15_frame</a> !== <a  onClick="return qs(event,this)" class=SI href="#142">frame</a>) ||
			(<a  onClick="return qs(event,this)" class=SR href="#461">rule_15_cp</a> !== <a  onClick="return qs(event,this)" class=SI href="#143">cp</a>))
<a name="481"></a>	<a  onClick="return qs(event,this)" class=SIT href="#463">register_changed</a> = 1;
    <span class=K>if</span> (<a  onClick="return qs(event,this)" class=SIT href="#462">write_reg_request_made</a> &amp;&amp; <a  onClick="return qs(event,this)" class=SIT href="#463">register_changed</a> &amp;&amp; <a  onClick="return qs(event,this)" class=SW href="#465">d_cache_read</a>)
      <span class=ST>$display</span>(<span class=S>&quot;ERROR: Ucode monitor: cannot make ucode read request after vars/frame/cp have changed.&quot;</span>);
  <span class=K>end</span>
  <span class=K>else</span> <span class=K>begin</span>
    <a  onClick="return qs(event,this)" class=SIT href="#462">write_reg_request_made</a> = 0;
    <a  onClick="return qs(event,this)" class=SIT href="#463">register_changed</a> = 0;
  <span class=K>end</span>
<span class=K>end</span>
      

<span class=C>// rule 16 : during invoke_*_quick, optop must be changed before any
</span><span class=C>//           stack write request
</span>
<a name="495"></a><span class=K>wire</span>		<a  onClick="return qs(event,this)" class=SW href="#496">invoke_in_r</a><a  href="hierarchy-s.p9.html#invoke_in_r___ucode_monitor"><IMG align=top border=0 SRC="v2html-i.gif"></a>;
<a name="496"></a><span class=K>assign</span> <a  onClick="return qs(event,this)" class=SW href="#495">invoke_in_r</a> = <a  onClick="return qs(event,this)" class=SI href="#144">invokestatic_quick</a> |
		     <a  onClick="return qs(event,this)" class=SI href="#145">invokenonvirtual_quick</a> |
		     <a  onClick="return qs(event,this)" class=SI href="#146">invokevirtual_quick</a> |
		     <a  onClick="return qs(event,this)" class=SI href="#147">invokevirtualobject_quick</a> |
		     <a  onClick="return qs(event,this)" class=SI href="#148">invokevirtual_quick_w</a> |
		     <a  onClick="return qs(event,this)" class=SI href="#149">invokesuper_quick</a> ;

<a name="ucode_monitor_invoke_e_flop"></a><a name="503"></a><a  onClick="return qs(event,this)" class=MM href="mj_ffs_behv.v.p3.html#ff_sre">ff_sre</a>	invoke_e_flop	(<a  onClick="return qs(event,this)" class=SO href="mj_ffs_behv.v.p3.html#2151">.out</a>(<a  onClick="return qs(event,this)" class=SW href="#503">invoke_in_e</a><a  href="hierarchy-s.p9.html#invoke_in_e___ucode_monitor"><IMG align=top border=0 SRC="v2html-i.gif"></a>),
			 <span class=SI>.din</span>(<a  onClick="return qs(event,this)" class=SW href="#496">invoke_in_r</a>),
			 <span class=SI>.enable</span>(!<a  onClick="return qs(event,this)" class=SI href="#133">ie_stall_ucode</a>),
			 <span class=SI>.clk</span>(<a  onClick="return qs(event,this)" class=SI href="#93">clk</a>),
			 <span class=SI>.reset_l</span>(<a  onClick="return qs(event,this)" class=SI href="#94">reset_l</a>));

<a name="509"></a><span class=K>wire</span>		<a  onClick="return qs(event,this)" class=SW href="#510">rule_16_optop_change_requested</a><a  href="hierarchy-s.p15.html#rule_16_optop_change_requested___ucode_monitor"><IMG align=top border=0 SRC="v2html-i.gif"></a>;
<a name="510"></a><span class=K>assign</span> <a  onClick="return qs(event,this)" class=SW href="#509">rule_16_optop_change_requested</a> = (
		(<a  onClick="return qs(event,this)" class=SI href="#106">u_f05</a> === <span class=D>`</span><a  onClick="return qs(event,this)" class=D href="ucode.h.html#71">F05_WT_V_OPTOP</a>) ||
		(<a  onClick="return qs(event,this)" class=SI href="#106">u_f05</a> === <span class=D>`</span><a  onClick="return qs(event,this)" class=D href="ucode.h.html#70">F05_WT_A_OPTOP</a>));

<a name="514"></a><span class=K>integer</span>		<a  onClick="return qs(event,this)" class=SIT href="#514">rule_16_optop_latched</a><a  href="hierarchy-s.p15.html#rule_16_optop_latched___ucode_monitor"><IMG align=top border=0 SRC="v2html-i.gif"></a>;
<a name="515"></a><span class=K>integer</span>		<a  onClick="return qs(event,this)" class=SIT href="#515">rule_16_optop_changed</a><a  href="hierarchy-s.p15.html#rule_16_optop_changed___ucode_monitor"><IMG align=top border=0 SRC="v2html-i.gif"></a>;
<a name="516"></a><span class=K>reg</span>	[31:0]	<a  onClick="return qs(event,this)" class=SR href="#516">rule_16_optop</a><a  href="hierarchy-s.p15.html#rule_16_optop___ucode_monitor"><IMG align=top border=0 SRC="v2html-i.gif"></a>;

<span class=C>// always @(posedge clk) begin
</span><span class=C>//   #2;
</span><span class=C>//   if (invoke_in_e &amp; ~u_done &amp; ~ie_stall_ucode &amp; reset_l &amp; monitor_enable) begin
</span><span class=C>//     if (rule_16_optop_change_requested) begin
</span><span class=C>//       rule_16_optop = optop;
</span><span class=C>//       rule_16_optop_latched = 1;
</span><span class=C>//     end
</span><span class=C>//     if (rule_16_optop_latched &amp;&amp; (rule_16_optop !== optop)) begin
</span><span class=C>//       rule_16_optop_changed = 1;
</span><span class=C>//       rule_16_optop_latched = 0;
</span><span class=C>//     end
</span><span class=C>//     if (s_cache_write &amp;&amp; !rule_16_optop_changed)
</span><span class=C>//       $display(&quot;ERROR: Ucode monitor: stack cache write requested before optop changed&quot;);
</span><span class=C>//   end
</span><span class=C>//   else begin
</span><span class=C>//     rule_16_optop_latched = 0;
</span><span class=C>//     rule_16_optop_changed = 0;
</span><span class=C>//   end
</span><span class=C>// end
</span>

<span class=C>// rule 17:  ucode is never allowed to read optop+4 or optop+8
</span>
<a name="541"></a><span class=K>wire</span>	[7:0]	<a  onClick="return qs(event,this)" class=SW href="#554">opcode_e</a><a  href="hierarchy-s.p13.html#opcode_e___ucode_monitor"><IMG align=top border=0 SRC="v2html-i.gif"></a>;
<a name="542"></a><span class=K>reg</span>	[7:0]	<a  onClick="return qs(event,this)" class=SR href="#546">opcode_e_next</a><a  href="hierarchy-s.p13.html#opcode_e_next___ucode_monitor"><IMG align=top border=0 SRC="v2html-i.gif"></a>;

<span class=K>always</span> @(<span class=K>posedge</span> <a  onClick="return qs(event,this)" class=SI href="#93">clk</a>)
  <span class=K>if</span> ((<a  onClick="return qs(event,this)" class=SI href="#154">valid_op_r</a> === 1'b1) &amp; ~<a  onClick="return qs(event,this)" class=SI href="#124">u_done</a>)
<a name="546"></a>    <a  onClick="return qs(event,this)" class=SR href="#542">opcode_e_next</a> = <a  onClick="return qs(event,this)" class=SI href="#153">opcode_1_op_r</a>;

<span class=C>//ff_sre_8	ff_invoke_in_e (.out		(opcode_e[7:0]),
</span><span class=C>//				.din		(opcode_e_next[7:0]),
</span><span class=C>//				.enable		(!iu_hold_e),
</span><span class=C>//				.reset_l	(reset_l),
</span><span class=C>//				.clk		(clk));
</span>
<a name="554"></a><span class=K>assign</span> 	<a  onClick="return qs(event,this)" class=SW href="#541">opcode_e</a> = <a  onClick="return qs(event,this)" class=SR href="#546">opcode_e_next</a>;

<a name="556"></a><span class=K>wire</span>	<a  onClick="return qs(event,this)" class=SW href="#557">rule_17_invoke_in_e</a><a  href="hierarchy-s.p15.html#rule_17_invoke_in_e___ucode_monitor"><IMG align=top border=0 SRC="v2html-i.gif"></a>;
<a name="557"></a><span class=K>assign</span>	<a  onClick="return qs(event,this)" class=SW href="#556">rule_17_invoke_in_e</a> =	((<a  onClick="return qs(event,this)" class=SW href="#554">opcode_e</a> === 8'hd6) || (<a  onClick="return qs(event,this)" class=SW href="#554">opcode_e</a> === 8'hd7) || (<a  onClick="return qs(event,this)" class=SW href="#554">opcode_e</a> === 8'hd8) ||
				 (<a  onClick="return qs(event,this)" class=SW href="#554">opcode_e</a> === 8'hd9) || (<a  onClick="return qs(event,this)" class=SW href="#554">opcode_e</a> === 8'hda) || (<a  onClick="return qs(event,this)" class=SW href="#554">opcode_e</a> === 8'hdb));

<a name="560"></a><span class=K>wire</span>	<a  onClick="return qs(event,this)" class=SW href="#561">dup_in_e</a><a  href="hierarchy-s.p4.html#dup_in_e___ucode_monitor"><IMG align=top border=0 SRC="v2html-i.gif"></a>;
<a name="561"></a><span class=K>assign</span>	<a  onClick="return qs(event,this)" class=SW href="#560">dup_in_e</a> = 		((<a  onClick="return qs(event,this)" class=SW href="#554">opcode_e</a> === 8'd90) || (<a  onClick="return qs(event,this)" class=SW href="#554">opcode_e</a> === 8'd91) || (<a  onClick="return qs(event,this)" class=SW href="#554">opcode_e</a> === 8'd92) ||
				 (<a  onClick="return qs(event,this)" class=SW href="#554">opcode_e</a> === 9'd93) || (<a  onClick="return qs(event,this)" class=SW href="#554">opcode_e</a> === 9'd94) || (<a  onClick="return qs(event,this)" class=SW href="#554">opcode_e</a> === 8'd95));

<span class=C>//always @(posedge u_f02_rd_stk) begin
</span><span class=C>//  if (~rule_17_invoke_in_e &amp; ~u_done &amp; ~dup_in_e)
</span><span class=C>//    if (u_addr_st_rd === (optop + 32'd4))
</span><span class=C>//      $display(&quot;ERROR: Ucode monitor: ucode tried to read optop+4&quot;);
</span><span class=C>//    if (u_addr_st_rd === (optop + 32'd8))
</span><span class=C>//      $display(&quot;ERROR: Ucode monitor: ucode tried to read optop+8&quot;);
</span><span class=C>//end
</span>
<span class=K>endmodule</span>

</pre>
<center><table class=NB cols=7 nosave><tr><td align="center"><a  href="hierarchy.html">Hierarchy</a></td><td align="center"><a  href="hierarchy-f.html">Files</a></td><td align="center"><a  href="hierarchy-m.html">Modules</a></td><td align="center"><a  href="hierarchy-s.html">Signals</a></td><td align="center"><a  href="hierarchy-t.html">Tasks</a></td><td align="center"><a  href="hierarchy-fn.html">Functions</a></td><td align="center"><a  href="http://www.abrizio.com/v2html/help_5_0.html?">Help</a></td></tr></table></center>
<script language="JavaScript"><!--
function next_page() { return ""; }
function first_page() { return ""; }
// -->
</script>
<hr>
<table>
 <tr><td><i>This page:</td>
  <td><i>Created:</td><td><i>Wed Mar 24 09:46:10 1999</td></tr>
  <td></td><td><i>From:</td><td><i>
/import/jet-pj2-sim/rahim/picoJava-II/sim/env/ucode_monitor.v</tr>
</table>
<hr>
<table width="100%"><tr><td><i>Verilog converted to html by  <A target="_top" href="http://www.abrizio.com/v2html/v2html.html">  v2html 5.0</A> 
 (written by <A href="mailto:v2html@iname.com">Costas Calamvokis</A>).</i></td><td align="right"><B><A href="http://www.abrizio.com/v2html/help_5_0.html?">Help</A></B></td></tr></table></body>
</html>
